---
title: "HW5"
author: "Laura Bashor"
date: "11/11/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### List files that are saved in the data subdirectory
```{r}
list.files("../data/")
```

### Load libraries
```{r}
library(tidyverse)
library(knitr)
library(broom)
library(tigris)
library(sf)
library(RColorBrewer)
```

### Load data: Load in the Washington Post homicide dataset, then use the tigris package to pull geographic data (tracts) for Minnesota's Hennepin County (FIPS code 053), where Minneapolis is
```{r}
homicides <- read_csv("../data/homicide-data.csv", show_col_types = FALSE)

mpls_tracts <- tracts(state = "MN", county = 053, cb = TRUE)
```

### Clean up data for visualization: (1) filter to just the city of Minneapolis, (2) make a column for whether or not the homicide is unsolved, (3) use fct_lump to group data by the three race groups with the highest number of homicides, and finally (4) convert data into an sf object for plotting and set the coordinate reference system (CRS)
```{r}
mpls <- homicides %>%
  filter(city == "Minneapolis") %>%
  mutate(unsolved = str_detect(disposition, "Open|without")) %>%
  mutate(victim_race = fct_lump_n(victim_race, 4)) %>%
  st_as_sf(coords = c("lon", "lat")) %>%
  st_set_crs(4269)

class(mpls)
```


